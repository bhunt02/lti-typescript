{"version":3,"file":"id_token.entity.js","sourceRoot":"/","sources":["entities/id_token.entity.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qCAA6G;AAE7G,uDAAkD;AAG3C,IAAM,YAAY,GAAlB,MAAM,YAAa,SAAQ,oBAAU;CAqC3C,CAAA;AArCY,oCAAY;AAEvB;IADC,IAAA,uBAAa,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;yCACpB;AAGZ;IADC,IAAA,uBAAa,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;0CACnB;AAGb;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;8CACH;AAGvB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;kDACK;AAG/B;IADC,IAAA,uBAAa,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;8CACf;AAGjB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;gDACN;AAGnB;IADC,IAAA,uBAAa,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;kDACX;AAGrB;IADC,IAAA,0BAAgB,EAAC,EAAE,IAAI,EAAE,0BAA0B,EAAE,CAAC;8BAC5C,IAAI;+CAAC;AAGhB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,GAAG,EAAE,EAAE,CAAC;;+CAC9B;AAUlB;IARC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,+BAAa,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE;QAC/D,QAAQ,EAAE,SAAS;QACnB,QAAQ,EAAE,SAAS;KACpB,CAAC;IACD,IAAA,oBAAU,EAAC;QACV,EAAE,IAAI,EAAE,KAAK,EAAE,oBAAoB,EAAE,aAAa,EAAE;QACpD,EAAE,IAAI,EAAE,UAAU,EAAE,oBAAoB,EAAE,UAAU,EAAE;KACvD,CAAC;8BACQ,+BAAa;8CAAC;uBApCb,YAAY;IADxB,IAAA,gBAAM,EAAC,gBAAgB,CAAC;GACZ,YAAY,CAqCxB","sourcesContent":["import { BaseEntity, Column, CreateDateColumn, Entity, JoinColumn, ManyToOne, PrimaryColumn } from 'typeorm';\nimport { PlatformInfoType, UserInfoType } from '../utils/types';\nimport { PlatformModel } from './platform.entity';\n\n@Entity('id_token_model')\nexport class IdTokenModel extends BaseEntity {\n  @PrimaryColumn({ type: 'text' })\n  iss: string;\n\n  @PrimaryColumn({ type: 'text' })\n  user: string;\n\n  @Column({ type: 'jsonb' })\n  userInfo: UserInfoType;\n\n  @Column({ type: 'jsonb' })\n  platformInfo: PlatformInfoType;\n\n  @PrimaryColumn({ type: 'text' })\n  clientId: string;\n\n  @Column({ type: 'text' })\n  platformId: string;\n\n  @PrimaryColumn({ type: 'text' })\n  deploymentId: string;\n\n  @CreateDateColumn({ type: 'timestamp with time zone' })\n  createdAt: Date;\n\n  @Column({ type: 'integer', default: 3600 * 24 })\n  expiresAt: number;\n\n  @ManyToOne(() => PlatformModel, (platform) => platform.idTokens, {\n    onDelete: 'CASCADE',\n    onUpdate: 'CASCADE',\n  })\n  @JoinColumn([\n    { name: 'iss', referencedColumnName: 'platformUrl' },\n    { name: 'clientId', referencedColumnName: 'clientId' },\n  ])\n  platform: PlatformModel;\n}\n"]}
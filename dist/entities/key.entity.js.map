{"version":3,"file":"key.entity.js","sourceRoot":"/","sources":["entities/key.entity.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qCAA6E;AAC7E,0CAA+C;AAC/C,uDAAgD;AAGzC,IAAM,QAAQ,GAAd,MAAM,QAAS,SAAQ,uBAAe;CAe5C,CAAA;AAfY,4BAAQ;AAEnB;IADC,IAAA,uBAAa,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;qCACpB;AAGZ;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;6CACL;AAGpB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;0CACR;AAGjB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;oCACd;AAGX;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;sCACZ;mBAdF,QAAQ;IADpB,IAAA,gBAAM,EAAC,WAAW,CAAC;GACP,QAAQ,CAepB;AAGM,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,QAAQ;CAO3C,CAAA;AAPY,wCAAc;AAMzB;IALC,IAAA,kBAAQ,EAAC,GAAG,EAAE,CAAC,+BAAa,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,SAAS,EAAE;QAC/D,QAAQ,EAAE,SAAS;QACnB,QAAQ,EAAE,SAAS;KACpB,CAAC;IACD,IAAA,oBAAU,EAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,oBAAoB,EAAE,KAAK,EAAE,CAAC,CAAC;8BACjD,+BAAa;gDAAC;yBANb,cAAc;IAD1B,IAAA,gBAAM,EAAC,kBAAkB,CAAC;GACd,cAAc,CAO1B;AAGM,IAAM,eAAe,GAArB,MAAM,eAAgB,SAAQ,QAAQ;CAW5C,CAAA;AAXY,0CAAe;AAU1B;IATC,IAAA,kBAAQ,EAAC,GAAG,EAAE,CAAC,+BAAa,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,UAAU,EAAE;QAChE,QAAQ,EAAE,SAAS;QACnB,QAAQ,EAAE,SAAS;KACpB,CAAC;IACD,IAAA,oBAAU,EAAC;QACV,EAAE,IAAI,EAAE,KAAK,EAAE,oBAAoB,EAAE,KAAK,EAAE;QAC5C,EAAE,IAAI,EAAE,aAAa,EAAE,oBAAoB,EAAE,aAAa,EAAE;QAC5D,EAAE,IAAI,EAAE,UAAU,EAAE,oBAAoB,EAAE,UAAU,EAAE;KACvD,CAAC;8BACQ,+BAAa;iDAAC;0BAVb,eAAe;IAD3B,IAAA,gBAAM,EAAC,mBAAmB,CAAC;GACf,eAAe,CAW3B","sourcesContent":["import {Column, Entity, JoinColumn, OneToOne, PrimaryColumn,} from 'typeorm';\nimport {EncryptedEntity} from '../utils/types';\nimport {PlatformModel} from './platform.entity';\n\n@Entity('key_model')\nexport class KeyModel extends EncryptedEntity {\n  @PrimaryColumn({ type: 'text' })\n  kid: string;\n\n  @Column({ type: 'text' })\n  platformUrl: string;\n\n  @Column({ type: 'text' })\n  clientId: string;\n\n  @Column({ type: 'text' })\n  iv: string;\n\n  @Column({ type: 'text' })\n  data: string;\n}\n\n@Entity('public_key_model')\nexport class PublicKeyModel extends KeyModel {\n  @OneToOne(() => PlatformModel, (platform) => platform.publicKey, {\n    onDelete: 'CASCADE',\n    onUpdate: 'CASCADE',\n  })\n  @JoinColumn([{ name: 'kid', referencedColumnName: 'kid' }])\n  platform: PlatformModel;\n}\n\n@Entity('private_key_model')\nexport class PrivateKeyModel extends KeyModel {\n  @OneToOne(() => PlatformModel, (platform) => platform.privateKey, {\n    onDelete: 'CASCADE',\n    onUpdate: 'CASCADE',\n  })\n  @JoinColumn([\n    { name: 'kid', referencedColumnName: 'kid' },\n    { name: 'platformUrl', referencedColumnName: 'platformUrl' },\n    { name: 'clientId', referencedColumnName: 'clientId' },\n  ])\n  platform: PlatformModel;\n}\n"]}
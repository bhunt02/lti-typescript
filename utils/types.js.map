{"version":3,"file":"types.js","sourceRoot":"/","sources":["utils/types.ts"],"names":[],"mappings":";;;AACA,qCAAmC;AA6KnC,IAAY,mBAIX;AAJD,WAAY,mBAAmB;IAC7B,0CAAmB,CAAA;IACnB,0CAAmB,CAAA;IACnB,0CAAmB,CAAA;AACrB,CAAC,EAJW,mBAAmB,mCAAnB,mBAAmB,QAI9B;AAWD,MAAa,eAAgB,SAAQ,oBAAU;CAG9C;AAHD,0CAGC","sourcesContent":["import {CookieOptions} from 'express';\nimport {BaseEntity} from 'typeorm';\nimport {JwtPayload} from 'jsonwebtoken';\n\nexport type ProviderOptions = {\n  appUrl?: string;\n  loginUrl?: string;\n  keySetUrl?: string;\n  dynRegUrl?: string;\n  appRoute?: string;\n  loginRoute?: string;\n  keySetRoute?: string;\n  dynRegRoute?: string;\n  staticPath?: string;\n  https?: boolean;\n  ssl?: {\n    key: string;\n    cert: string;\n    staticPath: string;\n  };\n  cors?: boolean;\n  serverAddon?: (...params: any[]) => any;\n  cookies?: CookieOptions;\n  devMode?: boolean;\n  debug?: boolean;\n  tokenMaxAge?: number;\n  dynReg?: DynamicRegistrationOptions;\n  prefix?: string;\n};\n\nexport type DynamicRegistrationOptions = {\n  url: string;\n  name: string;\n  logo?: string;\n  description?: string;\n  redirectUris?: string[];\n  customParameters?: Record<string, string>;\n  autoActivate?: boolean;\n  useDeepLinking?: boolean;\n};\n\nexport type DynamicRegistrationSecondaryOptions = {\n  initiate_login_uri?: string;\n  redirect_uris?: string[];\n  client_name?: string;\n  jwks_uri?: string;\n  logo_uri?: string;\n  'https://purl.imsglobal.org/spec/lti-tool-configuration'?: Partial<LtiPlatformRegistration>;\n};\n\nexport type VerifiedToken = {\n  'https://purl.imsglobal.org/spec/lti/claim/tool_platform': PlatformInfoType;\n  'https://purl.imsglobal.org/spec/lti/claim/roles': string[];\n  'https://purl.imsglobal.org/spec/lti/claim/target_link_uri': string;\n  'https://purl.imsglobal.org/spec/lti/claim/custom': Record<string, any>;\n  'https://purl.imsglobal.org/spec/lti/claim/launch_presentation': IMSLaunchPresentation;\n  'https://purl.imsglobal.org/spec/lti-ags/claim/endpoint': IMSGradeEndpoint;\n  'https://purl.imsglobal.org/spec/lti-nrps/claim/namesroleservice': any;\n  'https://purl.imsglobal.org/spec/lti/claim/context'?: IMSContext;\n  'https://purl.imsglobal.org/spec/lti/claim/resource_link'?: IMSResourceLink;\n  'https://purl.imsglobal.org/spec/lti/claim/deployment_id'?: string;\n};\n\nexport type IMSGradeEndpoint = {\n  scope: string[];\n  lineitems: string;\n  lineitem: string;\n};\n\nexport type IMSContext = {\n  id: string;\n  label?: string;\n  title?: string;\n  type?: string[];\n};\n\nexport type IMSResourceLink = {\n  id: string;\n  description?: string;\n  title?: string;\n};\n\nexport type IMSLaunchPresentation = {\n  document_target?: 'iframe' | 'frame' | 'window';\n  height?: string | number;\n  width?: string | number;\n  return_url?: string;\n  locale?: string;\n};\n\nexport type DeepLinkingSettings = {\n  deep_link_return_url: string;\n  accept_types: ('link' | 'file' | 'html' | 'ltiResourceLink' | 'image')[];\n  accept_media_types?: string;\n  accept_presentation_document_targets: ('iframe' | 'window' | 'embed')[];\n  accept_multiple?: boolean | 'true' | 'false';\n  auto_create?: boolean | 'true' | 'false';\n  title: string;\n  text: string;\n  data: string;\n};\n\nexport type LISClaim = {\n  person_sourcedid?: string;\n  course_offering_sourcedid?: string;\n  course_section_sourcedid?: string;\n};\n\nexport type ContextProperties = MainContextProperties & AdditionalContext;\n\nexport type MainContextProperties = {\n  contextId: string;\n  user: string;\n  context: IMSContext;\n  resource: IMSResourceLink;\n  messageType: string;\n  version: string;\n  deepLinkingSettings: DeepLinkingSettings;\n  lis: LISClaim;\n};\n\nexport type AdditionalContext = {\n  path: string;\n  roles: string[];\n  targetLinkUri: string;\n  custom: any;\n  launchPresentation: IMSLaunchPresentation;\n  endpoint: IMSGradeEndpoint;\n  namesRoles: IMSNamesRoles;\n};\n\nexport type IMSNamesRoles = {\n  context_memberships_url: string;\n};\n\nexport type ValidatedToken = JwtPayload &\n  UserInfo &\n  VerifiedToken & { platformId: string; clientId: string };\n\nexport type IdToken = {\n  iss: string;\n  clientId: string;\n  deploymentId: string;\n  platformId: string;\n  platformContext: ContextProperties;\n  platformInfo: {\n    product_family_code: string;\n    version: string;\n    guid: string;\n    name: string;\n    description: string;\n  };\n  user: string;\n  userInfo: UserInfo;\n};\n\nexport type UserInfo = {\n  given_name: string;\n  family_name: string;\n  name: string;\n  email: string;\n};\n\n/**\n * @name RouteType\n * @description A type that describes a route based on the pathname and method\n * @property route RegExp property which represents the pathname of the route\n * @property method String property which maps to an HTTP/S method\n */\nexport type RouteType = {\n  route: RegExp | string;\n  method: string;\n};\n\nexport enum AuthTokenMethodEnum {\n  RSA_KEY = 'RSA_KEY',\n  JWK_KEY = 'JWK_KEY',\n  JWK_SET = 'JWK_SET',\n}\n\nexport type AuthConfigType = {\n  method: AuthTokenMethodEnum;\n  key: string;\n};\n\nexport type UserInfoType = any;\n\nexport type PlatformInfoType = any;\n\nexport class EncryptedEntity extends BaseEntity {\n  iv: string;\n  data: string;\n}\n\nexport type PlatformProperties = {\n  platformUrl: string;\n  clientId: string;\n  name: string;\n  authenticationEndpoint: string;\n  accessTokenEndpoint: string;\n  authorizationServer?: string;\n  kid: string;\n  authToken: AuthConfigType;\n  active?: boolean;\n  dynamicallyRegistered?: boolean;\n  registrationEndpoint?: string;\n};\n\nexport type AccessTokenType = {\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n  refresh_token?: string;\n  scope?: string;\n};\n\nexport type KeyObject = {\n  key: string;\n  kid: string;\n};\n\nexport type LineItem = {\n  id: string;\n  scoreMaximum: number;\n  label: string;\n  resourceId?: string;\n  tag: string;\n  resourceLinkId?: string;\n  startDateTime?: string;\n  endDateTime?: string;\n  gradesReleased?: false;\n};\n\nexport type CreateLineItem = Omit<LineItem, 'id'>;\n\nexport type getLineItemOptions = {\n  resourceLinkId?: boolean;\n  resourceId?: boolean;\n  tag?: string | false;\n  limit?: number | false;\n  id?: string | false;\n  label?: string | false;\n  url?: string | false;\n};\n\nexport type ScoreResultType = {\n  id: string;\n  scoreOf: string;\n  userId: string;\n  resultScore: number | null;\n  resultMaximum: number;\n  scoringUserId?: string;\n  comment?: string;\n};\n\nexport type ScoreType = {\n  scoreGiven: number;\n  scoreMaximum: number;\n  comment?: string;\n  activityProgress:\n    | 'Initialized'\n    | 'Starting'\n    | 'InProgress'\n    | 'Submitted'\n    | 'Completed';\n  gradingProgress:\n    | 'FullyGraded'\n    | 'Pending'\n    | 'PendingManual'\n    | 'Failed'\n    | 'NotReady';\n  timestamp: string;\n  userId: string;\n  scoringUserId?: string;\n  submission?: {\n    startedAt: string;\n    submittedAt?: string;\n  };\n};\n\nexport type LTIK = {\n  platformUrl: string;\n  platformCode: string;\n  clientId: string;\n  deploymentId: string;\n  contextId: string;\n  user: string;\n};\n\nexport type LtiAdvantageLoginParams = {\n  iss: string;\n  target_link_uri: string;\n  client_id?: string;\n  redirect_uri: string;\n  login_hint: string;\n  lti_message_hint: string;\n  lti_deployment_id: string;\n};\n\nexport type LtiAdvantageLoginArgs = {\n  response_type: 'id_token';\n  response_mode: 'form_post';\n  id_token_signed_response_alg: 'RS256';\n  scope: 'openid';\n  client_id: string;\n  redirect_uri: string;\n  login_hint: string;\n  nonce: string;\n  prompt: 'none';\n  lti_message_hint?: string;\n  lti_deployment_id?: string;\n  state: string;\n};\n\nexport type LtiResourceType =\n  | 'link'\n  | 'file'\n  | 'html'\n  | 'ltiResourceLink'\n  | 'image';\n\nexport interface BaseContentItem {\n  type: LtiResourceType;\n  title?: string;\n  text?: string;\n  custom?: Record<string, string>;\n}\n\nexport interface IconContentItem extends BaseContentItem {\n  url: string;\n  icon?: string;\n  thumbnail?: {\n    url: string;\n    width: string | number;\n    height: string | number;\n  };\n}\n\nexport interface ContentItem extends IconContentItem {\n  embed?: string;\n  window?: {\n    targetName: string;\n    width: string | number;\n    height: string | number;\n    windowFeatures: string;\n  };\n  iframe?: {\n    src: string;\n    width: string | number;\n    height: string | number;\n  };\n}\n\nexport interface LinkContentItem extends ContentItem {\n  type: 'link';\n}\n\nexport interface LtiResourceLinkContentItem extends ContentItem {\n  type: 'ltiResourceLink';\n  custom?: Record<string, any>;\n  lineItem?: {\n    label?: string;\n    scoreMaximum: number;\n    resourceId?: string;\n    tag?: string;\n    gradesReleased?: boolean;\n  };\n  available?: {\n    startDateTime?: Date;\n    endDateTime?: Date;\n  };\n  submission?: {\n    startDateTime?: Date;\n    endDateTime?: Date;\n  };\n}\n\nexport interface FileContentItem extends IconContentItem {\n  type: 'file';\n  expiresAt: Date;\n}\n\nexport interface HtmlFragmentContentItem extends BaseContentItem {\n  type: 'html';\n  html: string;\n}\n\nexport interface ImageContentItem extends IconContentItem {\n  type: 'image';\n  width?: string | number;\n  height?: string | number;\n}\n\nexport type OpenIdConfiguration = {\n  issuer: string;\n  authorization_endpoint: string;\n  registration_endpoint: string;\n  jwks_uri: string;\n  token_endpoint: string;\n  token_endpoint_auth_methods_supported: ['private_key_jwt'] & string[];\n  token_endpoint_auth_signing_alg_values_supported: ['RS256'] & string[];\n  scopes_supported: ['openid'] & string[];\n  response_types_supported: ['id_token'] & string[];\n  id_token_signing_alg_values_supported: ['RS256'] & string[];\n  claims_supported: string[];\n  subject_types_supported: ('public' | 'pairwise')[];\n  authorization_server: string;\n  'https://purl.imsglobal.org/spec/lti-platform-configuration': LtiPlatformConfig;\n};\n\nexport type OpenIdRegistration = {\n  application_type: 'web';\n  grant_types: ['client_credentials', 'implicit'] & string[];\n  response_types: ['id_token'] & string[];\n  redirect_uris: string[];\n  initiate_login_uri: string;\n  client_name: string;\n  logo_uri?: string;\n  token_endpoint_auth_method: 'private_key_jwt';\n  contacts?: any[];\n  client_uri?: string;\n  tos_uri?: string;\n  policy_uri?: string;\n  scope: string;\n  'https://purl.imsglobal.org/spec/lti-tool-configuration': LtiPlatformRegistration;\n};\n\nexport type ToolOpenIdConfiguration = {\n  client_id: string;\n  registration_client_uri?: string;\n  registration_access_token?: string;\n} & OpenIdRegistration;\n\nexport type LtiPlatformConfig = {\n  product_family_code: string;\n  version: string;\n  messages_supported: MessageSupported[];\n  variables: string[];\n};\n\nexport type LtiPlatformRegistration = {\n  domain: string;\n  secondary_domains?: string[];\n  deployment_id?: string;\n  target_link_uri: string;\n  custom_parameters?: Record<string, string>;\n  description?: string;\n  messages: LtiMessageRegistration[];\n  claims: string[];\n};\n\nexport type LtiMessageRegistration = {\n  type: string;\n  target_link_uri?: string;\n  label?: string;\n  icon_uri?: string;\n  custom_parameters?: Record<string, string>;\n  placements?: string[];\n  roles?: string[];\n};\n\nexport type LtiDeepLinkingMessageRegistration = {\n  placements?: ('Content Area' | 'RichTextEditor')[];\n  supported_types: LtiResourceType[];\n  supported_media_types: string[];\n} & LtiMessageRegistration;\n\nexport type MessageSupported = {\n  type: string;\n  placements?: string[];\n};\n"]}